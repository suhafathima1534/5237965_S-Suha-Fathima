// Simple Text Editor - Solution Program

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 1000000

char text[MAX];       // editor content
int len = 0;          // current length

// stack for undo operations
typedef struct {
    int type;         // 1 = append, 2 = delete
    char *data;       // string involved
} Op;

Op stack[100000];     // undo stack
int top = -1;

int main() {
    int Q;
    scanf("%d", &Q);

    while (Q--) {
        int type;
        scanf("%d", &type);

        if (type == 1) {        // append
            char w[100000];
            scanf("%s", w);
            int l = strlen(w);

            // save undo info
            stack[++top].type = 1;
            stack[top].data = strdup(w);

            // append to text
            strcpy(text+len, w);
            len += l;
        }
        else if (type == 2) {   // delete
            int k;
            scanf("%d", &k);

            // save undo info (store deleted substring)
            stack[++top].type = 2;
            stack[top].data = strndup(text+len-k, k);

            len -= k;
            text[len] = '\0';
        }
        else if (type == 3) {   // print
            int k;
            scanf("%d", &k);
            printf("%c\n", text[k-1]);
        }
        else if (type == 4) {   // undo
            Op last = stack[top--];
            if (last.type == 1) {
                int l = strlen(last.data);
                len -= l;
                text[len] = '\0';
            } else {
                int l = strlen(last.data);
                strcpy(text+len, last.data);
                len += l;
            }
            free(last.data);
        }
    }
    return 0;
}
